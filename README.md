# Игра в шляпу

Вам предлагается поучаствовать в игре на загадывание и отгадывание слов. Один из игроков пытается объяснить вытянутое из шляпы слово с помощью набора неоднокоренных слов, которые называются по очереди. После каждого нового сказанного слова другие игроки предлагают несколько вариантов отгадок. Чем раньше игрок угадает вытянутое из шляпы слово, тем больше очков он получит. Чем больше игроков угадают вытянутое из шляпы слово и чем раньше они это сделают, тем больше очков получит объясняющий игрок.

Чтобы открыть пошаговый туториал по деплою вашего первого игрока в Шляпу, откройте (HOW_TO_START.md)[HOW_TO_START.md]

# Механика игры

В рамках подготовке к игре участники разрабатывают свою модель, которая реализует логику загадывания и отгадывания. Для участия в общем соревновании участники разворачивают на удаленном сервере сервис с моделью, который должен быть доступен ведущим по сети интернет.

Игра проходит следующим образом:
- Ведущий вытягивает из шляпы слово `WORD` для команды `i` и отправляет его сервису команды с помощью REST API.
- Сервис команды `i` составляет для ведущего список из `N_EXPLAINING_WORDS` слов, которые ведущий будет сообщать другим участникам по одному.
- Отгадывание проходит `N_EXPLAINING_WORDS` итераций:
    - каждую итерацию `j` ведущий добавляет новую подсказку - новое слово и отправляет сервисам команд все сказанные на данный момент слова;
    - сервисы других игроков пытаются отгадать загаданное слово `WORD`, сообщая `N_GUESSING_WORDS` слов;
    - Как только загаданное слово оказывается в сообщенных ведущему словах, команда получает очки (чем раньше угадала - тем больше, например `N_EXPLAINING_WORDS - j`);
    - Загадывающая команда получает очки за каждую отгадавшую команду (например, столько же очков).

Для тренировки алгоритмов, участвующих в соревновании, можно использовать *только* предоставленный набор данных. Несколько наборов слов для проведения тестовых игр между несколькими игроками предоставлены в папке vocabulary.

# Правила игры

Можно использовать:
1) списки стоп-слов
2) стемминг, лемматизацию
3) pos-tagging
4) токенизацию (например, в spicy)

Нельзя использовать:
1) прочие корпусы текстов, кроме опубликованных организаторами специально для проведения шляпы
2) предобученные модели
3) синонимы, антонимы, словари похожих слов и тд

Это относится как к самостоятельному использованию (скачиваете словари и используете их сами), так и к использованию библиотек, которые под капотом делают это.

Если pos-tagging/лемматизация/токенизация используют внутри себя какие-то предобученные модели - это ок, но использовать эти же предобученные модели для других целей нельзя. Например, нельзя использовать их, чтобы находить похожие слова на этапе предобработки текстов или при отгадывании/загадывании. Ещё пример - нельзя использовать их, чтобы обогащать тексты синонимами / антонимами.

Если хочется использовать что-то конкретное, но это не попадает в перечисленные пункты, то пишите организаторам (или заводите issue), мы обсудим и при необходимости отредактируем этот список.

# Пример игры

Начнем с примера проведения игры. Для этого откроем ноутбук `GameRun_Demo.ipynb` и выполним его целиком. Для примера можно взять данные датасета 20 news groups -  их можно загрузить с помощью модуля [`sklearn.datasets`](http://scikit-learn.org/stable/modules/generated/sklearn.datasets.fetch_20newsgroups.html). Они также доступны на [kaggle](https://www.kaggle.com/crawford/20-newsgroups). В качестве примера также подойдет любой достаточно длинный файл с текстом (приблизительно 1 миллиона строк должно быть достаточно).

Данный пример позволяет проводить локальные игры между несколькими игроками в рамках юпитер ноутбука (нужно инициализировать объекты соответствующих классов в ноутбуке), а также тестировать развернутые удаленно сервисы (с помощью класса `RemotePlayer`).

# Как эта игра в шляпу связана с реальной жизнью

![](https://www.jeremyjordan.me/content/images/2019/09/ml-development-cycle.png)

["Чеклист" стадий ML-проекта](https://www.jeremyjordan.me/ml-projects-guide/#planning)

Существуют разные этапы работы над проектами. Например, можно выделить следующие:
- этап постановки задачи,
- этап быстрого прототипирования и уточнения постановки задачи,
- этап подготовки к продакшену.

Поскольку постановки задач в проектах на основе машинного обучения часто уточняются и изменяются в процессе работы, а решение о внедрении регулярно принимается на основе качества решения, важно уметь демонстрировать полученную модель ещё до её внедрения в продакшн. Помимо демонстрации измеренного качества модели и оценки возможного экономического эффекта, для демонстраций можно использовать и саму модель, запущенную в тестовом режиме и доступную заинтересованным лицам. Особенно актуально это становится, когда заказчику хочется самостоятельно попробовать протестировать модель ручками, чтобы оценить субъективную "адекватность" работы модели, или когда заказчику хочется провалидировать её непосредственно как сервис, включая её в процесс в тестовом режиме (например, для логирования и последующего анализа результатов).

Для того, чтобы иметь возможность поделиться результатами своей работы с коллегами или заказчиками, не заставляя их углубляться в устройство решения, можно использовать технологию docker ([что такое docker?](https://www.freecodecamp.org/news/docker-simplified-96639a35ff36/)). Docker позволяет запустить модель "в песочнице" (в контейнере), установив все необходимые зависимости и не изменяя саму систему, на которой он запущен (например, правильное использование докера не способно установить другие версии пакетов или "сломать" систему). Чтобы внутри docker-контейнера было запущено что-то, что будет взаимодействовать с прогнозной или любой другой моделью, используются фреймворки, позволяющие python-скриптам отвечать на HTTP запросы. Одним из наиболее распространенных фреймворков, решающим эту задачу, является [Flask](https://palletsprojects.com/p/flask/).

В данном соревновании мы с вами воспользуемся Python, Flask и Docker, чтобы реализовать игрока в шляпу, научить его отвечать на HTTP запросы и, наконец, задеплоить его на удаленном сервере, откуда он будет доступен другим людям.

А поскольку мы загадываем и отгадываем слова, мы также попрактикуем предобработку текстов, обучение и использование текстовых эмбеддингов для слов :)
